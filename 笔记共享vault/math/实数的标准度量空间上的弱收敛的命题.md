---
tags:
  - math
  - 实分析
  - 概率论
---
我们知道在度量空间$(M,d)$上的可测空间$(M,\mathcal{M})$，（其中$\mathcal{M}$是$M$上的Borel代数）上讨论概率空间$(\Omega,\mathcal{B},\mathbb{P})$到$(M,\mathcal{M})$的随机变量$X_n$的弱收敛$X_n\xrightarrow{d}{X}$的时候，有经典的[[度量空间上弱收敛的等价命题：portmanteau定理]]。现在如果我们更具体一些，让我们讨论的度量空间就是实数$\mathbb{R}$的标准度量空间，那么随机变量弱收敛的条件还可以更具体一些。

> [!命题1]
> $X_n,X,n\in \mathbb{N}$都是某个概率空间上的实随机变量，假设对于任意的$f \in C^{\infty}(\mathbb{R})$都满足条件$$\mathbb{E}(f(X_n))\to \mathbb{E}(f(X))$$那么$$X_n\xrightarrow{d}{X}$$

* Portmanteau定理当中类似的要求最少的命题是要求$f \in \text{BL}(\mathbb{R})$，即全体有界的Lipschitz函数。当时很明显，此处的"命题1"要求更少，毕竟$C^{\infty}(\mathbb{R})\subset \text{BL}(\mathbb{R})$。

> [!主要想法]
> 整个证明的思路就是基于[[an epsilon of room]]的函数逼近。令$||\cdot||_u$是一致范数，那么只要我能证明对任意的$f \in \text{BL}(\mathbb{R})$以及任意的$\varepsilon>0$我都能找到一个$f_{\varepsilon}\in C^{\infty}(\mathbb{R})$使得$$||f-f_{\varepsilon}||_u<\varepsilon$$那么我们就可以利用Portmanteau定理中弱收敛关于有界Lipschitz连续函数的等价命题，去证明$$\begin{aligned}|\mathbb{E}(f(X_n))-\mathbb{E}(f(X))|&\leq |\mathbb{E}(f(X_n))-\mathbb{E}(f_{\varepsilon}(X_n))|\\&+|\mathbb{E}(f_{\varepsilon}(X_n))-\mathbb{E}(f_{\varepsilon}(X))|\\&+|\mathbb{E}(f_{\varepsilon}(X))-\mathbb{E}(f(X))|\\&\leq  2||f-f_{\varepsilon}||_u+|\mathbb{E}(f_{\varepsilon}(X_n))-\mathbb{E}(f_{\varepsilon}(X))|\\&=2\varepsilon+|\mathbb{E}(f_{\varepsilon}(X_n))-\mathbb{E}(f_{\varepsilon}(X))| \end{aligned}$$由“命题1”中的条件我们知道，对于任意的连续函数的情况$$|\mathbb{E}(f_{\varepsilon}(X_n))-\mathbb{E}(f_{\varepsilon}(X))|\to 0$$两边取上极限我们知道，$$\limsup_{n\to \infty}|\mathbb{E}(f(X_n))-\mathbb{E}(f(X))|\leq 2\varepsilon ,\forall \varepsilon>0$$于是便可以证明对所有的$f \in \text{BL}(\mathbb{R})$都有$$\mathbb{E}(f(X_n))\to \mathbb{E}(f(X))$$那么Portmanteau定理告诉我们$$X_n\xrightarrow{d}{X}$$

所以剩下的唯一的问题便是，如何证明或者构造对给定的有界Lipschitz函数的光滑逼近？

### 1. 用高斯函数来对函数进行“平滑化”

#### 1.1 有界Lipschitz的范数

> [!定义1.1]
> $\text{BL}(M,d)$表示所有的定义在度量空间$(M,d)$上的满足下面条件的复值函数组成的函数空间:
> 1. $f$满足Lipschitz条件
> 2. $||f||_{\text{Lip}}<\infty$,其中$$||f||_{\text{Lip}}:=\sup_{x,y\in M,x\neq y}\frac{|f(x)-f(y)|}{d(x,y)}$$
> 3. $||f||_u<\infty$,其中$||f||_u:=\sup_{x\in M}|f(x)|$

* 通常而言，如果我们定义$$||f||_{\text{Lip}}+||f||_u$$为此空间上的范数，那么装备上这个范数的空间$\text{BL}(M,d)$是一个Banach代数。不过此处我们定义一个不同的范数，这个范数使得我们可以得到一个对此问题而言比较好的不等式。我们定义$$||f||_{BL}:=\max\{||f||_{\text{Lip}},2||f||_u\}$$这的确是一个范数，因为$||f||_{\text{Lip}},2||f||_u$分别是此空间上的两个范数，而两个范数取最大值会定义一个新的范数。

> [!命题1.1]
> $f \in \text{BL}(M,d)$,那么对任意$x,y \in M$满足$$|f(x)-f(y)|\leq ||f||_{BL}\min\{1,d(x,y)\}$$

* 有的地方也会简写为(笔记Pollard的书里面)$$|f(x)-f(y)|\leq ||f||_{BL}\{1\land d(x,y) \}$$
这个不等式基本来自于两个范数的定义，
1. 首先如果$x=y$,不等式的确可以取等号。
2. 如果$x\neq y$,那么$$|f(x)-f(y)|=\frac{|f(x)-f(y)|}{d(x,y)}d(x,y)\leq ||f||_{\text{Lip}}d(x,y)$$
3. 如果$x\neq y$,那么$$|f(x)-f(y)|\leq |f(x)|+|f(y)|\leq 2||f||_u$$
那么我们立刻能得到$$\begin{aligned}|f(x)-f(y)|&\leq \min\{||f||_{\text{Lip}}d(x,y),2||f||_u\}\\&\leq ||f||_{BL}\min\{1,d(x,y)\}\end{aligned}$$

#### 1.2 对有界Lipschitz函数的光滑化

主要的方法就是[[Smoothing sum and integral]]的技术。我们选择一个光滑的函数，通过伸缩以及归一化处理，把它变成一个含参数的积分核$\varphi_{\varepsilon}(x)$,然后我们通过与原来的函数做卷积的方式赋予卷积后的函数$f*\varphi_{\varepsilon}(x)$并同时保证新的函数与原来的函数在范数的意义下误差可以被控制起来。

相较于bump函数，这里因为问题中并不要求光滑函数具有紧支集，因此我们选用更为简单的函数，高斯函数$\varphi(x):=\frac{1}{\sqrt{2\pi}}e^{\frac{-x^2}{2}}$。通过缩放，以及归一化处理，得到积分核$$\varphi_{\varepsilon}(x):=\frac{1}{\varepsilon}\varphi\left(\frac{x}{\varepsilon}\right)=\frac{1}{\sqrt{2\pi}\varepsilon}e^{-\frac{x^2}{2{\varepsilon^2}}}$$于是对于任意$f \in BL(\mathbb{R})$我们可以构造一个$$f_{r}(x):=f*\varphi_{r}(x)=\frac{1}{\sqrt{2\pi}r}\int_{\mathbb{R}}f(y)e^{-\frac{(x-y)^2}{2{r^2}}}\,dy$$
* 现在我们关心，对于任意的$\varepsilon>0$是否一定能找到一个$f_{r_{\varepsilon}}$使得$$||f_{r_{\varepsilon}}-f||_u<\varepsilon$$
1. 第一种途径，我们可以引用[[approximation to the identity]]当中1.1当中的收敛结论中的第二条。因为$f \in BL(\mathbb{R})$那么函数自然是一致连续的函数，因此$$||f_r-f||_u\to 0,\text{ as }r\to 0$$由这个结果我们知道，答案是肯定的。
2. 第二种途径我们可以利用本文的1.1节的不等式。我们首先可以把$f_r(x)$视为随机变量$f(x+rZ)$的含参数的期望，其中$Z(\omega)$是符合标准正态分布$\mathcal{N}(0,1)$的随机变量那么随机变量。此时$f(x+rZ)$的期望恰好是$f_r(x)$，即$$f_r(x)=\mathbb{E}(f(x+rZ))$$那么估计$||f_r-f||_u$,即$|f_r(x)-f(x)|$的上确界，那么按照[[逐项估计]]第4节的精神，也就是估计$|\mathbb{E}(f(x+rZ)-f(x))|$,而这可以利用本文1.1当中的不等式:$$\begin{aligned}|f_r(x)-f(x)|&\leq \mathbb{E}(|f(x+rZ)-f(x)|)\\&\leq ||f||_{BL}\mathbb{E}(\min\{1,|rZ|\}) \end{aligned}$$这里我们定义$g_r(\omega):=\min\{1,|rZ(\omega)|\}$而我们发现$g_r(\omega)\xrightarrow{a.e.}0$,那么控制收敛定理告诉我们$\mathbb{E}(\min\{1,|rZ|\})\to0$。于是$$||f_r-f||_u\leq ||f||_{BL}\mathbb{E}(\min\{1,|rZ|\})\to 0,\text{ as }r\to 0$$所以答案也是肯定的。

