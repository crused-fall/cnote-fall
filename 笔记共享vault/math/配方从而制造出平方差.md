---
tags:
  - math
  - tool_idea
---

> [!配方从而制造出平方差的核心想法]
> 在一个多项式(可能是多元的)当中，如果我们发现其中一部分可以看成是某个完全平方的一部分，那么我们可以尝试把式子转换为一个完全平方减去一部分的形式。在情况足够好的时候，这往往能制造出一个平方差，从而对原来的多项式进行因式分解。

### 1. 一些基本的例子

> [!例子1.1]
> $$\begin{aligned}x^4+1-x^2&=(x^2+1)^2-3x^2\\&=(x^2+1-\sqrt{3}x)(x^2+1+\sqrt{3}x) \end{aligned}$$在这个例子当中，我们认为$x^4+1$是$(x^2+1)^2$这个完全平方的其中一部分，这个完全平方缺失的一部分是$2x^2$那么我们可以尝试把其配成一个完全平方然后与$x^2$制造一个平方差。

> [!例子1.2(Sophie Germain恒等式)]
> $$\begin{aligned}a^4+4b^4&= (a^2+2b^2)^2-4a^2b^2\\&= (a^2+2b^2-2ab)(a^2+2b^2+2ab)\end{aligned}$$在这个例子当中，我们认为$a^4+4b^4$是完全平方$(a^2+2b^2)^2$当中的一部分，缺失的部分$4a^2b^2$恰好可以用来制造平方差。

> [!例子1.3]
> 已知$c^2=2ab$分解$a^2+b^2$：$$\begin{aligned}a^2+b^2&= (a+b)^2-2ab \\&= (a+b)^2-c^2 \\&= (a+b-c)(a+b+c)\end{aligned}$$这里我们自然是认为$a^2+b^2$为完全平方$(a+b)^2$的一部分，然后我们发现可以利用已知的等式去制造一个平方差，从而实现分解。

> [!例子1.4]
> 已知$b=2c-ad^2$,分解$a^6+c^2+ba^3$：$$\begin{aligned}a^6+c^2+ba^3&= (a^3+c)^2+(b-2c)a^3\\&= (a^3+c)^2-a^4d^2\\&= (a^3+c-a^2d)(a^3+c+a^2d)\end{aligned}$$这里我们是认为$a^6+c^2$是完全平方$(a^3+c)^2$，然后在完成配方以后，发现条件恰好可以用于产生平方差。

### 2. 实际问题中的应用

#### 2.1 证明某种形式的数是合数

> [!问题2.1.1]
> 证明当$n> 1$形如：$$n^4+4^n$$的正整数必然是合数。

这里要证明这种形式的正整数是合数，我们可以把问题理解为因式分解，也就是说如果这个式子总是可以被分解为两个大于1的整数的因子，那么这个数就必然是合数。

首先一个非常明显的情况是，如果$n$是偶数，那么问题就非常简单了，此时$n^4+4^n$也必然是偶数。所以接下来我们只需要考虑这样一个等价的问题：

> [!问题2.1.2]
> 已知$n=2k-1$,分解$n^4+4^n$。

我们继续采用刚才的技巧，首先认为$n^4+2^{2n}$为完全平方$(n^2+2^n)^2$的一部分。于是$$\begin{aligned}n^4+2^{2n}&= (n^2+2^n)^2-n^22^{n+1}\\&= (n^2+2^n)^2-n^2 2^{2k}\\&=(n^2+2^n-n2^k)(n^2+2^n+n2^k) \end{aligned}$$接下来我们只需要证明，$n^2+2^n-n2^k>1$对任意正整数$k$以及正奇数$n$成立即可。而这是容易的，因为$2^n>n2^k$。

#### 2.2 解丢番图方程

> [!问题2.2.1]
> 求丢番图方程$$x^2+6xy+8y^2+6y+3x=2$$的整数解。

按照[[利用因式分解求解丢番图方程]]当中提到的“理想情况”，我们决定对方程等式左边进行因式分解。并且因为等式左边是二次多项式，因此配方然后制造平方差是合理的想法。于是$$\begin{aligned}x^2+6xy+9y^2-y^2+6y+3x&=(x+3y)^2-y^2+6y+3x\\&= (x+2y)(x-2y)+3(x+2y)\\&= (x+2y)(x+4y+3)\end{aligned}$$因此方程的整数解只可能是:
1. $x+2y=1,x+4y+3=2$
2. $x+2y=2,x+4y+3=1$
3. $x+2y=-1,x+4y+3=-2$
4. $x+2y=-2,x+4y+3=-1$
因此方程的解为$$(0,1),(3,-2),(3,-1),(6,-2)$$
再比如解下面的丢番图方程：

> [!问题2.2.2]
> $x$是素数，解丢番图方程$$x=y^4+4$$

我们的主要想法就是让方程因式分解，从而使得方程可以转换为更为简单的情形（更详细的想法可见[[利用因式分解求解丢番图方程]]）。

此处想到可以对$y^4+4$进行分解，按照此篇文章的想法有：$$\begin{aligned}y^4+4&=(y^2+2)^2-4y^2\\&=(y^2-2y+2)(y^2+2y+2)\end{aligned}$$于是原本的丢番图方程我们就可以写作$$x=(y^2-2y+2)(y^2+2y+2)$$由于$x$是素数，因此式子右边必然有一个为$1$或者$-1$。
1. 首先排除$-1$的可能性，因为为$-1$的时候，两个二次方程都不会有解。
2. 其次如果$y^2-2y+2=1$，那么$y=1$，从而$x=5$，所以这一组解就是$(5,1)$。
3. 如果$y^2+2y+2=1$，那么$y=-1$，从而$x=5$，所以这一组解就是$(5,-1)$。
综上所述，此丢番图方程的解为$$(5,1),(5,-1)$$
* 注意这里$x$是素数的条件是必要的，否则的话解不会如此简单。比如$(x,y)=(2085104,38)$也是符合方程的，其中$2085104$并非素数。
